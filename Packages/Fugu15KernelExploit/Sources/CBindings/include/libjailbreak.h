#include <dlfcn.h>
extern NSString *prebootPath(NSString *path);
extern void *loadLibJailbreak(void);

__attribute__((unused))
static void jbdGetStatus(uint64_t *PPLRWStatus, uint64_t *kcallStatus, pid_t *pid)
{
	static void (*impl_jbdGetStatus)(uint64_t *, uint64_t *, pid_t *);
	if(!impl_jbdGetStatus)
	{
		impl_jbdGetStatus = (void (*)(uint64_t *, uint64_t *, pid_t *))dlsym(loadLibJailbreak(), "jbdGetStatus");
	}
	if(impl_jbdGetStatus)
	{
		impl_jbdGetStatus(PPLRWStatus, kcallStatus, pid);
	}
}

__attribute__((unused))
static void jbdTransferPPLRW(uint64_t magicPage)
{
	static void (*impl_jbdTransferPPLRW)(uint64_t);
	if(!impl_jbdTransferPPLRW)
	{
		impl_jbdTransferPPLRW = (void (*)(uint64_t))dlsym(loadLibJailbreak(), "jbdTransferPPLRW");
	}
	if(impl_jbdTransferPPLRW)
	{
		impl_jbdTransferPPLRW(magicPage);
	}
}

__attribute__((unused))
static uint64_t jbdTransferKcall(void)
{
	static uint64_t (*impl_jbdTransferKcall)(void);
	if(!impl_jbdTransferKcall)
	{
		impl_jbdTransferKcall = (uint64_t (*)(void))dlsym(loadLibJailbreak(), "jbdTransferKcall");
	}
	if(impl_jbdTransferKcall)
	{
		return impl_jbdTransferKcall();
	}
}

__attribute__((unused))
static void jbdFinalizeKcall(void)
{
	static void (*impl_jbdFinalizeKcall)(void);
	if(!impl_jbdFinalizeKcall)
	{
		impl_jbdFinalizeKcall = (void (*)(void))dlsym(loadLibJailbreak(), "jbdFinalizeKcall");
	}
	if(impl_jbdFinalizeKcall)
	{
		impl_jbdFinalizeKcall();
	}
}

__attribute__((unused))
static int64_t jbdInitEnvironment(void)
{
	static int64_t (*impl_jbdInitEnvironment)(void);
	if(!impl_jbdInitEnvironment)
	{
		impl_jbdInitEnvironment = (int64_t (*)(void))dlsym(loadLibJailbreak(), "jbdInitEnvironment");
	}
	if(impl_jbdInitEnvironment)
	{
		return impl_jbdInitEnvironment();
	}
}

__attribute__((unused))
static int64_t jbdRebuildTrustCache(void)
{
	static int64_t (*impl_jbdRebuildTrustCache)(void);
	if(!impl_jbdRebuildTrustCache)
	{
		impl_jbdRebuildTrustCache = (int64_t (*)(void))dlsym(loadLibJailbreak(), "jbdRebuildTrustCache");
	}
	if(impl_jbdRebuildTrustCache)
	{
		return impl_jbdRebuildTrustCache();
	}
}

__attribute__((unused))
static int64_t jbdSetFakelibMountActive(bool active)
{
	static int64_t (*impl_jbdSetFakelibMountActive)(bool);
	if(!impl_jbdSetFakelibMountActive)
	{
		impl_jbdSetFakelibMountActive = (int64_t (*)(bool))dlsym(loadLibJailbreak(), "jbdSetFakelibMountActive");
	}
	if(impl_jbdSetFakelibMountActive)
	{
		return impl_jbdSetFakelibMountActive(active);
	}
}

__attribute__((unused))
void patchBaseBinLaunchDaemonPlists(void)
{
	static void (*impl_patchBaseBinLaunchDaemonPlists)(void);
	if(!impl_patchBaseBinLaunchDaemonPlists)
	{
		impl_patchBaseBinLaunchDaemonPlists = (int64_t (*)(void))dlsym(loadLibJailbreak(), "patchBaseBinLaunchDaemonPlists");
	}
	if(impl_patchBaseBinLaunchDaemonPlists)
	{
		return impl_patchBaseBinLaunchDaemonPlists();
	}
}